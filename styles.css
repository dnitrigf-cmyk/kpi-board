/* =========================================================
   THEMES â€” COLOR TOKENS
   ========================================================= */

/* DARK THEME */
body.theme-dark{
  --bg:#0c1118;
  --card:#0f1620;
  --card-2:#111a26;
  --head:#121a27;
  --text:#e8eef5;
  --muted:#a8b6c9;
  --border:#1e2a3b;

  --bar-green:#38d39f;
  --bar-yellow:#d1b445;
  --bar-red:#e06b74;

  --green-bg:#123426;
  --green-bd:#225b45;
  --red-bg:#2b171b;
  --red-bd:#5c2a31;
  --gray-bg:#1a222e;
  --gray-bd:#2b3648;

  --shadow:0 8px 22px rgba(0,0,0,.35);
  --btn-ghost:#101a28;
  --btn-ghost-hover:#182439;
  --ctx-bg:#0f1824;
  --scroll-track:#0f1620;
  --scroll-thumb:#1b2738;
}

/* LIGHT THEME */
body.theme-light{
  --bg:#f6f7fb;
  --card:#ffffff;
  --card-2:#f2f4f8;
  --head:#ffffff;
  --text:#1c2430;
  --muted:#5b6b82;
  --border:#dee3ea;

  --bar-green:#2ea76a;
  --bar-yellow:#c49a1c;
  --bar-red:#d64555;

  --green-bg:#e8f6ef;
  --green-bd:#2ea76a;
  --red-bg:#fff0f0;
  --red-bd:#e05252;
  --gray-bg:#eef2f7;
  --gray-bd:#cfd8e3;

  --shadow:0 8px 22px rgba(14,30,62,.10);
  --btn-ghost:#eef3fb;
  --btn-ghost-hover:#e5eefc;
  --ctx-bg:#ffffff;
  --scroll-track:#e9eef6;
  --scroll-thumb:#cfd8e3;
}

/* =========================================================
   BASE STRUCTURE
   ========================================================= */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:14px/1.45 'Inter',system-ui,Segoe UI,Roboto,Arial,sans-serif;
}

/* ===== HEADER ===== */
header{
  display:flex; align-items:center; gap:10px;
  padding:12px 16px;
  background:var(--head);
  border-bottom:1px solid var(--border);
}
header h1{margin:0;font-size:16px;font-weight:700;color:var(--text)}
.tag{
  border:1px solid #d4af37; color:#d4af37;
  border-radius:10px; padding:2px 8px; font-size:12px;
}

/* ===== THEME BUTTON ===== */
.app-menu-btn{
  margin-left:auto;
  background:var(--btn-ghost);
  border:1px solid var(--border);
  color:var(--text);
  border-radius:10px;
  padding:6px 12px;
  cursor:pointer;
}
.app-menu-btn:hover{ background:var(--btn-ghost-hover); }

/* ===== LAYOUT ===== */
main{display:flex; gap:16px; padding:16px}
.side{
  width:240px; background:var(--card);
  border:1px solid var(--border); border-radius:14px;
  padding:12px; box-shadow:var(--shadow);
}
.side button{
  background:var(--card-2); border:1px solid var(--border);
  color:var(--text); padding:8px 10px; border-radius:10px; cursor:pointer;
}
.side button:hover{border-color:#34465f}

/* ===== TABLE ===== */
.grid-wrap{
  flex:1; background:var(--card);
  border:1px solid var(--border); border-radius:16px;
  overflow:auto; box-shadow:var(--shadow); position:relative;
}
table{border-collapse:separate; border-spacing:0; width:100%}
thead th{
  position:sticky; top:0; z-index:3;
  background:var(--card-2);
  color:var(--muted); font-weight:600; font-size:12px;
  text-align:left; padding:12px 14px; border-bottom:1px solid var(--border);
}
tbody th, tbody td{ padding:10px 12px; border-bottom:1px solid var(--border); }
tbody tr:nth-child(odd){background:var(--card);}
tbody tr:nth-child(even){background:var(--card-2);}
tbody tr:hover{background:#eef3fb;}
.col-kpi{min-width:240px}
.col-target{min-width:150px}
.cell{min-width:120px; text-align:center}

/* ===== PROGRESS BARS ===== */
.rag.progress{
  position: relative;
  height: 32px;
  border-radius: 10px;
  background: var(--gray-bg);
  border: 1px solid var(--gray-bd);
  overflow: hidden;
  display:flex; align-items:center; justify-content:center;
}
.rag.progress .bar{
  position:absolute; left:0; top:0; bottom:0;
  width:0%; transition: width .2s ease;
}
.rag.progress .bar.red    { background: var(--bar-red); }
.rag.progress .bar.yellow { background: var(--bar-yellow); }
.rag.progress .bar.green  { background: var(--bar-green); }
.rag.progress .pct{
  position:relative; z-index:1;
  color:var(--text); font-weight:600;
}

/* ===== INLINE INPUT ===== */
.inline-input{
  width:100%; padding:8px 10px; border-radius:10px;
  border:1px solid var(--border); background:var(--card-2);
  color:var(--text); outline:none; font:inherit; text-align:center;
}
.inline-input:focus{ border-color:#34465f; background:#fff }

/* ===== USERS BAR ===== */
.usersbar{
  position:sticky; bottom:0; left:0; right:0;
  display:flex; justify-content:space-between; align-items:center; gap:10px;
  padding:10px 12px;
  background:var(--card);
  border-top:1px solid var(--border);
  border-bottom-left-radius:16px; border-bottom-right-radius:16px;
}
#users{display:flex; gap:6px; flex-wrap:wrap}
.userBtn{
  background:var(--btn-ghost); border:1px solid var(--border); color:var(--text);
  border-radius:999px; padding:6px 12px; font-size:13px; cursor:pointer;
}
.userBtn.active{
  background:#1a73e8; color:#fff;
  border-color:transparent;
}

/* ===== CONTEXT MENU ===== */
.ctx-menu{
  position:fixed; min-width:160px; z-index:9999; display:none;
  background:var(--ctx-bg); color:var(--text);
  border:1px solid var(--border); border-radius:10px; padding:6px;
  box-shadow:0 10px 30px rgba(0,0,0,.45);
}
.ctx-item{padding:8px 10px;border-radius:8px;cursor:pointer;}
.ctx-item:hover{background:#f3f6fb;}
.ctx-item.danger{color:#b42318;}
.ctx-item.danger:hover{background:#fdecec;}
